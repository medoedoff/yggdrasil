post_install(){
    LOGDIR_PATH=/var/log/teldrassil
    PACKAGE_PATH=/opt/tds/teldrassil
    USER=tech
    GROUP=tech
    virtualenv -p python3 $PACKAGE_PATH/venv
    ${PACKAGE_PATH}/venv/bin/pip install --no-deps ${PACKAGE_PATH}/dependencies/*
    chown -R $USER:$GROUP -R ${LOGDIR_PATH} ${PACKAGE_PATH}
}

post_upgrade(){
    LOGDIR_PATH=/var/log/teldrassil
    PACKAGE_PATH=/opt/tds/teldrassil
    USER=tech
    GROUP=tech
    rm -rf $PACKAGE_PATH/venv
    virtualenv -p python3 $PACKAGE_PATH/venv
    ${PACKAGE_PATH}/venv/bin/pip install --no-deps ${PACKAGE_PATH}/dependencies/*
    chown -R $USER:$GROUP -R ${LOGDIR_PATH} ${PACKAGE_PATH}
}

post_remove(){
    PACKAGE_PATH=/opt/tds/teldrassil/
    EXCEPT=/opt/tds/teldrassil/packages
    find ${PACKAGE_PATH} -mindepth 1 ! -regex "^${EXCEPT}\(/.*\)?" | xargs rm -rf
}
